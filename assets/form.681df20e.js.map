{"version":3,"file":"form.681df20e.js","sources":["../../src/view/form.vue"],"sourcesContent":["<template>\n  <el-form ref=\"elForm\" :model=\"ruleForm\" :rules=\"rules\" label-position=\"top\">\n    <el-form-item label=\"文章标题\" prop=\"title\">\n      <el-input v-model=\"ruleForm.title\" placeholder=\"请输入文章标题\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"文章内容\" prop=\"json\">\n      <we-editor\n        class=\"container\"\n        toolbar-class=\"toolbar\"\n        editable-class=\"editable\"\n        :toolbar-option=\"toolbar\"\n        :editable-option=\"editable\"\n        v-model:json=\"ruleForm.json\"\n      />\n    </el-form-item>\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"onSubmit\">表单验证并控制台打印</el-button>\n    </el-form-item>\n  </el-form>\n  <br />\n  <u-prism :content=\"ruleForm.json\" lang=\"json\" />\n</template>\n\n<script lang=\"ts\">\n  import { useWangEditor } from 'wangeditor5-for-vue3'\n  import { defineComponent, reactive, ref } from 'vue'\n  import UPrism from '../components/u-prism.vue'\n  import { FormRules } from 'element-plus'\n\n  export default defineComponent({\n    setup() {\n      const elForm = ref<any>(null)\n\n      const ruleForm = reactive({\n        title: '',\n        json: '',\n      })\n      const rules: FormRules = {\n        title: [\n          { required: true, message: '文章标题不能为空', trigger: 'blur' },\n          { min: 3, max: 15, message: '文章标题字数在 3 - 15 字符', trigger: 'blur' },\n        ],\n        json: [\n          {\n            trigger: 'change',\n            validator(rule, value: string, cb) {\n              if (value.length > 2) {\n                cb()\n              } else {\n                cb('文章内容不能为空，trigger: change')\n              }\n            },\n          },\n          { required: true, message: '文章内容不能为空，trigger: blur', trigger: 'blur' },\n        ],\n      }\n\n      const { toolbar, editable } = useWangEditor({\n        config: { placeholder: '支持表单验证', autoFocus: false },\n        delay: 1000,\n      })\n\n      function onSubmit() {\n        elForm.value.validate((valid: boolean) => {\n          if (!valid) return\n\n          console.log('文章标题：')\n          console.log(ruleForm.title)\n          console.log('文章内容（string）：')\n          console.log(ruleForm.json)\n          if (ruleForm.json.length > 2) {\n            console.log('文章内容（object）：')\n            console.log(JSON.parse(ruleForm.json))\n          }\n        })\n      }\n\n      return { ruleForm, rules, toolbar, editable, elForm, onSubmit }\n    },\n    components: { UPrism },\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n  .container {\n    border: 1px solid #e5e5e5;\n    border-radius: var(--el-input-border-radius, var(--el-border-radius-base));\n  }\n  .toolbar {\n    border: none;\n    border-bottom: 1px solid #e5e5e5;\n  }\n  .editable {\n    border: none;\n  }\n  :deep.el-form-item {\n    &.is-error {\n      .container {\n        border-color: var(--el-color-danger);\n      }\n    }\n  }\n</style>\n"],"names":["_createElementVNode","_createVNode","_withCtx"],"mappings":"iJA6BE,KAAK,GAAa,EAAa,CAC7B,OAAQ,CACA,KAAA,GAAS,EAAS,IAAI,EAEtB,EAAW,EAAS,CACxB,MAAO,GACP,KAAM,EAAA,CACP,EACK,EAAmB,CACvB,MAAO,CACL,CAAE,SAAU,GAAM,QAAS,mDAAY,QAAS,MAAO,EACvD,CAAE,IAAK,EAAG,IAAK,GAAI,QAAS,iEAAqB,QAAS,MAAO,CACnE,EACA,KAAM,CACJ,CACE,QAAS,SACT,UAAU,EAAM,EAAe,EAAI,CAC7B,AAAA,EAAM,OAAS,EACd,IAEH,EAAG,uEAA0B,CAEjC,CACF,EACA,CAAE,SAAU,GAAM,QAAS,sEAA0B,QAAS,MAAO,CACvE,CAAA,EAGI,CAAE,UAAS,YAAa,EAAc,CAC1C,OAAQ,CAAE,YAAa,uCAAU,UAAW,EAAM,EAClD,MAAO,GAAA,CACR,EAEmB,YAAA,CACX,EAAA,MAAM,SAAS,AAAC,GAAmB,CACxC,AAAI,CAAC,GAEL,SAAQ,IAAI,gCAAO,EACX,QAAA,IAAI,EAAS,KAAK,EAC1B,QAAQ,IAAI,kDAAe,EACnB,QAAA,IAAI,EAAS,IAAI,EACrB,EAAS,KAAK,OAAS,GACzB,SAAQ,IAAI,kDAAe,EAC3B,QAAQ,IAAI,KAAK,MAAM,EAAS,IAAI,CAAC,GACvC,CACD,CACH,CAEA,MAAO,CAAE,WAAU,QAAO,UAAS,WAAU,SAAQ,WACvD,EACA,WAAY,CAAE,QAAO,CACvB,CAAC,8CAhE+C,8DAAU,UAGpDA,EAAA,KAAA,KAAA,KAAA,EAAA,CAAA,yJAlBNC,EAiBU,EAAA,CAjBD,IAAI,SAAU,MAAO,EAAA,SAAW,MAAO,EAAA,MAAO,iBAAe,KAAA,EAAA,WACpE,IAEe,CAFfA,EAEe,EAAA,CAFD,MAAM,2BAAO,KAAK,OAAA,EAAA,WAC9B,IAAoE,CAApEA,EAAoE,EAAA,CAAA,WAAjD,EAAS,SAAA,MAAA,sBAAA,EAAA,IAAA,GAAA,GAAA,AAAA,GAAT,WAAS,MAAK,GAAE,YAAY,4CAAA,EAAA,KAAA,EAAA,CAAA,YAAA,CAAA,UAEjDA,EASe,EAAA,CATD,MAAM,2BAAO,KAAK,MAAA,EAAA,WAC9B,IAOE,CAPFA,EAOE,EAAA,CANA,MAAM,YACN,gBAAc,UACd,iBAAe,WACd,iBAAgB,EAAA,QAChB,kBAAiB,EAAA,SACV,KAAM,EAAS,SAAA,KAAA,gBAAA,EAAA,IAAA,GAAA,GAAA,AAAA,GAAT,WAAS,KAAI,EAAA,EAAA,KAAA,EAAA,CAAA,iBAAA,kBAAA,MAAA,CAAA,UAG/BA,EAEe,EAAA,KAAA,CAAA,QAAAC,EADb,IAAkE,CAAlED,EAAkE,EAAA,CAAvD,KAAK,UAAW,QAAO,EAAA,QAAA,EAAA,WAAU,IAAU,CAAA,4DAG1D,EACAA,EAAgD,EAAA,CAAtC,QAAS,EAAS,SAAA,KAAM,KAAK,MAAA,EAAA,KAAA,EAAA,CAAA,SAAA,CAAA"}